/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Nextflow config file for databases links
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Defines pointers to the DBS publicly available that store models parametrisations
    and data.
----------------------------------------------------------------------------------------
*/
params {

    // AlphaFold2 links
    bfd               = 'https://storage.googleapis.com/alphafold-databases/casp14_versions/bfd_metaclust_clu_complete_id30_c90_final_seq.sorted_opt.tar.gz'
    small_bfd         = 'https://storage.googleapis.com/alphafold-databases/reduced_dbs/bfd-first_non_consensus_sequences.fasta.gz'
    alphafold2_params = 'https://storage.googleapis.com/alphafold/alphafold_params_2022-03-02.tar'
    mgnify            = 'https://storage.googleapis.com/alphafold-databases/casp14_versions/mgy_clusters_2018_12.fa.gz'
    pdb70             = 'http://wwwuser.gwdg.de/~compbiol/data/hhsuite/databases/hhsuite_dbs/old-releases/pdb70_from_mmcif_200916.tar.gz'
    pdb_mmcif         = 'rsync.rcsb.org::ftp_data/structures/divided/mmCIF/' //'rsync.rcsb.org::ftp_data/structures/divided/mmCIF/' ftp.pdbj.org::ftp_data/structures/divided/mmCIF/ rsync.ebi.ac.uk::pub/databases/pdb/data/structures/divided/mmCIF/
    pdb_obsolete      = 'ftp://ftp.wwpdb.org/pub/pdb/data/status/obsolete.dat'
    uniclust30        = 'https://storage.googleapis.com/alphafold-databases/casp14_versions/uniclust30_2018_08_hhsuite.tar.gz'
    uniref90          = 'ftp://ftp.uniprot.org/pub/databases/uniprot/uniref/uniref90/uniref90.fasta.gz'
    pdb_seqres        = 'ftp://ftp.wwpdb.org/pub/pdb/derived_data/pdb_seqres.txt'
    uniprot_sprot     = 'ftp://ftp.ebi.ac.uk/pub/databases/uniprot/current_release/knowledgebase/complete/uniprot_sprot.fasta.gz'
    uniprot_trembl    = 'ftp://ftp.ebi.ac.uk/pub/databases/uniprot/current_release/knowledgebase/complete/uniprot_trembl.fasta.gz'
    
    def bfd_name           = params.bfd ?: 'bfd'
    def smallbfd_name      = params.smallbfd ?: 'smallbfd'
    def mgnify_name        = params.mgnify ?: 'mgnify'
    def pdb70_name         = params.pdb70 ?: 'pdb70'
    def pdb_mmcif_name     = params.pdb_mmcif ?: 'pdb_mmcif'
    def uniclust30_name    = params.uniclust30 ?: 'uniclust30'
    def uniref90_name      = params.uniref90 ?: 'uniref90'
    def pdb_seqres_name    = params.pdb_seq ?: 'pdb_seqres'
    def uniprot_name       = params.uniprot ?: 'uniprot'
    def alphafold_params_name = params.alphafold_params ?: 'alphafold_params_*'
    def mmcif_files_name   = params.mmcif_path ?: 'pdb_mmcif/mmcif_files/'
    def mmcif_obsolete_name = params.mmcif_obsolete ?: 'pdb_mmcif/obsolete.dat'

    def uniclust30_db_name = params.uniclust30_db ?: 'uniclust30_2018_08'
    def bfd_first_non_consensus_sequences_name = params.bfd_first_non_consensus_sequences ?: 'bfd-first_non_consensus_sequences.fasta' 
    def uniprot_fasta_name = params.uniprot_fasta ?: 'uniprot.fasta'
    def pdb_seqres_txt_name = params.pdb_seqres_txt ?: 'pdb_seqres.txt'
    def bfd_metaclust_clu_complete_id30_c90_final_seq_sorted_opt_name = params.bfd_metaclust_clu_complete_id30_c90_final_seq_sorted_opt ?: 'bfd_metaclust_clu_complete_id30_c90_final_seq.sorted_opt'
    def uniref90_fasta_name = params.uniref90_fasta ?: 'uniref90.fasta'
    def mgy_clusters_fasta_name = params.mgy_clusters_fasta ?: 'mgy_clusters_2022_05.fa'
    

    // Alphafold paths
    bfd_path               = "${params.alphafold2_db}/${bfd_name}/*"
    small_bfd_path         = "${params.alphafold2_db}/${small_bfd_name}/*"
    //alphafold2_params_path = "${params.alphafold2_db}/alphafold_params_*/*"
    //alphafold2_params_path = "${params.alphafold2_db}/params/*"
    alphafold2_params_path = "${params.alphafold2_db}/${alphafold_params_name}/*"
    mgnify_path            = "${params.alphafold2_db}/${mgnify_name}/*"
    pdb70_path             = "${params.alphafold2_db}/${pdb70_name}/**"
    pdb_mmcif_path         = "${params.alphafold2_db}/${pdb_mmcif_name}/**"
    //uniclust30_path        = "${params.alphafold2_db}/uniclust30/**"
    //uniclust30_path        = "/srv/scratch/sbf/uniclust30/**"
    uniclust30_path        = "${params.alphafold2_db}/${uniclust30_name}/**"
    uniref90_path          = "${params.alphafold2_db}/${uniref90_name}/*"
    pdb_seqres_path        = "${params.alphafold2_db}/${pdb_seqres_name}/*"
    uniprot_path           = "${params.alphafold2_db}/${uniprot_name}/*"

    // Alphafold variables
    //bfd_variable               = "${params.alphafold2_db}/bfd/"
    bfd_dir_path               = "${params.alpahfold2_db}/${bfd_name}/"
    //small_bfd_variable         = "${params.alphafold2_db}/smallbfd/"
    small_bfd_dir_path         = "${params.alphafold2_db}/${smallbfd_name}/"
    //mgnify_variable            = "${params.alphafold2_db}/mgnify/"
    mgnify_dir_path            = "${params.alphafold2_db}/${mgnify_name}/"
    //pdb70_variable             = "${params.alphafold2_db}/pdb70/"
    pdb70_dir_path             = "${params.alphafold2_db}/${pdb70_name}/"
    //pdb_mmcif_variable         = "${params.alphafold2_db}/pdb_mmcif/"
    pdb_mmcif_dir_path         = "${params.alphafold2_db}/${pdb_mmcif_name}/"
    //uniclust30_variable        = "${params.alphafold2_db}/uniclust30/"
    //uniclust30_variable        = "/srv/scratch/sbf/uniclust30/"
    uniclust30_dir_path        = "${params.alphafold2_db}/${uniclust30_name}/"
    //uniref90_variable          = "${params.alphafold2_db}/uniref90/"
    uniref90_dir_path          = "${params.alpahfold2_db}/${uniref90_name}/"
    //pdb_seqres_variable        = "${params.alphafold2_db}/pdb_seqres/"
    pdb_seqres_dir_path        = "${params.alphafold2_db}/${pdb_seqres_name}/"
    //uniprot_variable           = "${params.alphafold2_db}/uniprot/"
    uniprot_dir_path           = "${params.alphafold2_db}/${uniprot_name}/"

    // Alphafold MSA Variables
    mgnify_database_path       = "${params.alphafold2_db}/${mgnify_name}/"
    //template_mmcif_dir         = "${params.alphafold2_db}/pdb_mmcif/mmcif_files/"
    template_mmcif_dir         = "${params.alphafold2_db}/${mmcif_files_name}/"
    //obsolete_pdbs_path         = "${params.alphafold2_db}/pdb_mmcif/obsolete.dat"
    obsolete_pdbs_path         = "${params.alphafold2_db}/${mmcif_obsolete_name}"

    // Colabfold links
    colabfold_db_link = 'http://wwwuser.gwdg.de/~compbiol/colabfold/colabfold_envdb_202108.tar.gz'
    uniref30          = 'https://wwwuser.gwdg.de/~compbiol/colabfold/uniref30_2202.tar.gz'

    // Colabfold paths
    colabfold_db_path                = "${params.colabfold_db}/colabfold_envdb_202108"
    uniref30_path                    = "${params.colabfold_db}/uniref30_2202"
    colabfold_alphafold2_params_tags = [
        "AlphaFold2-multimer-v1" : "alphafold_params_colab_2021-10-27",
        "AlphaFold2-multimer-v2" : "alphafold_params_colab_2022-03-02",
        "AlphaFold2-ptm"         : "alphafold_params_2021-07-14"
    ]
}
